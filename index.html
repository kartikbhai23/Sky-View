<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyView - Weather at Your Fingertips</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      overflow-x: hidden;
      color: white;
      transition: background 1s ease;
    }

    /* Weather-based backgrounds - Day */
    body.clear-weather.day {
      background: linear-gradient(135deg, #2980b9, #6dd5fa, #ffffff);
    }

    body.rain-weather.day {
      background: linear-gradient(135deg, #434343 0%, #757575 100%);
    }

    body.clouds-weather.day {
      background: linear-gradient(135deg, #bdc3c7, #2c3e50);
    }

    body.snow-weather.day {
      background: linear-gradient(135deg, #e6dada, #274046);
    }

    body.thunderstorm-weather.day {
      background: linear-gradient(135deg, #2c3e50, #3498db);
    }

    /* Weather-based backgrounds - Night */
    body.clear-weather.night {
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    }

    body.rain-weather.night {
      background: linear-gradient(135deg, #000000 0%, #434343 100%);
    }

    body.clouds-weather.night {
      background: linear-gradient(135deg, #232526, #414345);
    }

    body.snow-weather.night {
      background: linear-gradient(135deg, #283048, #859398);
    }

    body.thunderstorm-weather.night {
      background: linear-gradient(135deg, #000000, #434343);
    }

    /* Weather-based backgrounds - Afternoon */
    body.clear-weather.afternoon {
      background: linear-gradient(135deg, #f2994a, #f2c94c, #87ceeb);
    }

    body.rain-weather.afternoon {
      background: linear-gradient(135deg, #636363 0%, #a0a0a0 100%);
    }

    body.clouds-weather.afternoon {
      background: linear-gradient(135deg, #ada996, #f2f2f2);
    }

    body.snow-weather.afternoon {
      background: linear-gradient(135deg, #d4d4d4, #536976);
    }

    body.thunderstorm-weather.afternoon {
      background: linear-gradient(135deg, #373b44, #4286f4);
    }

    /* Clear sky sun and clouds */
    #clear-sky-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
      opacity: 0;
      transition: opacity 1s ease;
    }

    #clear-sky-container.active {
      opacity: 1;
    }

    /* Moon for night */
    .moon {
      position: absolute;
      top: 50px;
      right: 50px;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, #f4f4f4, #d3d3d3);
      border-radius: 50%;
      box-shadow: 0 0 40px 10px rgba(255, 255, 255, 0.4);
      animation: pulse 3s infinite ease-in-out;
    }

    /* Stars for night */
    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 3px white;
      animation: twinkle 2s infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.9; }
    }

    .sun {
      position: absolute;
      top: 50px;
      right: 50px;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, #fff76a, #fcd440);
      border-radius: 50%;
      box-shadow: 0 0 40px 10px rgba(255, 223, 0, 0.6);
      animation: pulse 3s infinite ease-in-out;
    }

    .cloud {
      position: absolute;
      background: #fff;
      border-radius: 50%;
      opacity: 0.6;
      animation: moveClouds 60s linear infinite;
    }

    .cloud::before,
    .cloud::after {
      content: '';
      position: absolute;
      background: #fff;
      border-radius: 50%;
    }

    .cloud::before {
      width: 60px;
      height: 60px;
      top: -30px;
      left: 30px;
    }

    .cloud::after {
      width: 50px;
      height: 50px;
      top: -20px;
      left: -30px;
    }

    .cloud1 {
      width: 100px;
      height: 60px;
      top: 100px;
      left: -200px;
    }

    .cloud2 {
      width: 120px;
      height: 70px;
      top: 200px;
      left: -300px;
      animation-delay: -20s;
    }

    .cloud3 {
      width: 90px;
      height: 50px;
      top: 300px;
      left: -150px;
      animation-delay: -40s;
    }

    @keyframes moveClouds {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(100vw + 300px)); }
    }

    /* Rain effect */
    #rain-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0;
      transition: opacity 1s ease;
    }

    #rain-container.active {
      opacity: 1;
    }

    .raindrop {
      position: absolute;
      width: 2px;
      height: 50px;
      background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.6));
      animation: fall linear infinite;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh);
      }
    }

    /* Snow effect */
    #snow-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0;
      transition: opacity 1s ease;
    }

    #snow-container.active {
      opacity: 1;
    }

    .snowflake {
      position: absolute;
      color: white;
      font-size: 1em;
      animation: snowfall linear infinite;
    }

    @keyframes snowfall {
      to {
        transform: translateY(100vh) rotate(360deg);
      }
    }

    /* Lightning effect */
    #lightning-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0;
      transition: opacity 1s ease;
    }

    #lightning-container.active {
      opacity: 1;
    }

    .lightning {
      position: absolute;
      width: 100%;
      height: 100%;
      background: white;
      opacity: 0;
    }

    @keyframes flash {
      0%, 100% { opacity: 0; }
      10% { opacity: 0.8; }
      20% { opacity: 0; }
      30% { opacity: 0.9; }
      40% { opacity: 0; }
    }

    /* Main container */
    .container {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 100px;
      animation: fadeInDown 1s ease;
    }

    .logo {
      font-size: 32px;
      font-weight: bold;
      background: linear-gradient(90deg, #fff, #a8dadc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin-left: 30px;
      font-size: 16px;
      transition: all 0.3s;
      position: relative;
    }

    nav a:hover {
      transform: translateY(-2px);
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: white;
      transition: width 0.3s;
    }

    nav a:hover::after {
      width: 100%;
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 60px 0;
      animation: fadeInUp 1s ease;
    }

    .hero h1 {
      font-size: 64px;
      font-weight: 700;
      margin-bottom: 20px;
      background: linear-gradient(90deg, #ffffff, #e0f7fa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
    }

    .hero p {
      font-size: 24px;
      margin-bottom: 50px;
      opacity: 0.9;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Search Box */
    .search-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 80px;
      animation: fadeInUp 1s ease 0.3s backwards;
    }

    .search-input {
      padding: 18px 25px;
      font-size: 18px;
      width: 400px;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      color: white;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .search-input:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
    }

    .search-btn {
      padding: 18px 35px;
      font-size: 18px;
      border: none;
      border-radius: 50px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
    }

    .search-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(102, 126, 234, 0.6);
    }

    .search-btn:active {
      transform: translateY(-1px);
    }

    .search-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Features */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
      margin-top: 80px;
      animation: fadeInUp 1s ease 0.6s backwards;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 40px 30px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s;
      cursor: pointer;
    }

    .feature-card:hover {
      transform: translateY(-10px);
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .feature-icon {
      font-size: 48px;
      margin-bottom: 20px;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    }

    .feature-card h3 {
      font-size: 24px;
      margin-bottom: 15px;
    }

    .feature-card p {
      font-size: 16px;
      opacity: 0.9;
      line-height: 1.6;
    }

    /* Weather Result Modal */
    #weather-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    #weather-modal.show {
      display: flex;
      opacity: 1;
    }

    /* Error Modal */
    #error-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(139, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    #error-modal.show {
      display: flex;
      opacity: 1;
    }

    .error-card {
      background: rgba(255, 0, 0, 0.2);
      backdrop-filter: blur(20px);
      border-radius: 30px;
      padding: 50px;
      max-width: 500px;
      width: 90%;
      border: 2px solid rgba(255, 0, 0, 0.5);
      box-shadow: 0 30px 80px rgba(255, 0, 0, 0.4);
      transform: scale(0.8);
      animation: shakeError 0.5s ease forwards;
      position: relative;
      text-align: center;
    }

    @keyframes shakeError {
      0%, 100% { transform: scale(1) translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: scale(1) translateX(-10px); }
      20%, 40%, 60%, 80% { transform: scale(1) translateX(10px); }
    }

    .error-icon {
      font-size: 80px;
      margin-bottom: 20px;
      animation: errorPulse 1s infinite;
    }

    @keyframes errorPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .error-title {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #ffcccc;
    }

    .error-message {
      font-size: 18px;
      margin-bottom: 30px;
      color: #ffdddd;
    }

    .error-btn {
      padding: 15px 40px;
      font-size: 18px;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.3);
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }

    .error-btn:hover {
      background: rgba(255, 255, 255, 0.4);
      transform: translateY(-3px);
    }

    .weather-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      border-radius: 30px;
      padding: 50px;
      max-width: 600px;
      width: 90%;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
      transform: scale(0.8);
      animation: popUp 0.5s ease forwards;
      position: relative;
    }

    @keyframes popUp {
      to {
        transform: scale(1);
      }
    }

    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      font-size: 24px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(90deg);
    }

    .weather-icon {
      font-size: 120px;
      text-align: center;
      margin-bottom: 20px;
      filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
    }

    .city-name {
      font-size: 42px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 10px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .weather-description {
      font-size: 24px;
      text-align: center;
      margin-bottom: 30px;
      text-transform: capitalize;
      opacity: 0.9;
    }

    .temperature {
      font-size: 72px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .weather-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 30px;
    }

    .detail-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      transition: all 0.3s;
    }

    .detail-item:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-5px);
    }

    .detail-label {
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 8px;
    }

    .detail-value {
      font-size: 24px;
      font-weight: bold;
    }

    /* Animations */
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 40px 20px;
      margin-top: 100px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      opacity: 0.8;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 42px;
      }

      .hero p {
        font-size: 18px;
      }

      .search-input {
        width: 100%;
        max-width: 300px;
      }

      .search-container {
        flex-direction: column;
      }

      nav {
        display: none;
      }

      .weather-card {
        padding: 30px;
      }

      .temperature {
        font-size: 56px;
      }

      .city-name {
        font-size: 32px;
      }

      .weather-details {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Weather Effects -->
  <div id="clear-sky-container">
    <div id="celestial-body"></div>
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>
  </div>

  <div id="rain-container"></div>
  <div id="snow-container"></div>
  <div id="lightning-container">
    <div class="lightning"></div>
  </div>

  <div class="container">
    <!-- Header -->
    <header>
      <div class="logo">☀️ SkyView</div>
      <nav>
        <a href="#features">Features</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </header> 

    <!-- Hero Section -->
    <div class="hero">
      <h1>Weather at Your Fingertips</h1>
      <p>Get real-time weather updates for any location worldwide. Stay prepared, stay informed.</p>
      
      <div class="search-container">
        <input type="text" class="search-input" placeholder="Enter city name...">
        <button class="search-btn">Get Weather</button>
      </div>
    </div>

    <!-- Features -->
    <div class="features" id="features">
      <div class="feature-card">
        <div class="feature-icon">🌡️</div>
        <h3>Real-Time Data</h3>
        <p>Access accurate temperature, humidity, and atmospheric conditions instantly</p>
      </div>
      
      <div class="feature-card">
        <div class="feature-icon">🌍</div>
        <h3>Global Coverage</h3>
        <p>Check weather for any city around the world with comprehensive data</p>
      </div>
      
      <div class="feature-card">
        <div class="feature-icon">⚡</div>
        <h3>Lightning Fast</h3>
        <p>Get instant results with our optimized weather data retrieval system</p>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p>&copy; 2025 SkyView Weather. Made with ❤️ for weather enthusiasts</p>
    </footer>
  </div>

  <!-- Weather Result Modal -->
  <div id="weather-modal">
    <div class="weather-card">
      <button class="close-btn" onclick="closeWeatherModal()">×</button>
      <div class="weather-icon" id="weather-icon">🌤️</div>
      <div class="city-name" id="city-name">City Name</div>
      <div class="weather-description" id="weather-description">Weather Description</div>
      <div class="temperature" id="temperature">25°C</div>
      
      <div class="weather-details">
        <div class="detail-item">
          <div class="detail-label">Feels Like</div>
          <div class="detail-value" id="feels-like">23°C</div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Humidity</div>
          <div class="detail-value" id="humidity">65%</div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Wind Speed</div>
          <div class="detail-value" id="wind-speed">5 m/s</div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Pressure</div>
          <div class="detail-value" id="pressure">1013 hPa</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Error Modal -->
  <div id="error-modal">
    <div class="error-card">
      <div class="error-icon">❌</div>
      <div class="error-title">Oops! City Not Found</div>
      <div class="error-message">Please check the city name and try again.</div>
      <button class="error-btn" onclick="closeErrorModal()">Try Again</button>
    </div>
  </div>

  <script>
    // OpenWeather API Configuration
    const API_KEY = 'b0207d006cd00a18ed7b73c87a8772b9';
    const API_URL = 'https://api.openweathermap.org/data/2.5/weather';

    const searchBtn = document.querySelector('.search-btn');
    const searchInput = document.querySelector('.search-input');
    const weatherModal = document.getElementById('weather-modal');
    const errorModal = document.getElementById('error-modal');

    // Weather effect containers
    const clearSkyContainer = document.getElementById('clear-sky-container');
    const rainContainer = document.getElementById('rain-container');
    const snowContainer = document.getElementById('snow-container');
    const lightningContainer = document.getElementById('lightning-container');
    const celestialBody = document.getElementById('celestial-body');

    // Get time of day
    function getTimeOfDay(timezoneOffset) {
      const now = new Date();
      const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
      const localTime = new Date(utc + (1000 * timezoneOffset));
      const hours = localTime.getHours();

      if (hours >= 5 && hours < 12) return 'morning';
      if (hours >= 12 && hours < 17) return 'afternoon';
      if (hours >= 17 && hours < 21) return 'evening';
      return 'night';
    }

    // Update celestial body (sun/moon)
    function updateCelestialBody(timeOfDay) {
      celestialBody.className = '';
      clearSkyContainer.innerHTML = '';
      
      if (timeOfDay === 'night' || timeOfDay === 'evening') {
        // Create moon
        const moon = document.createElement('div');
        moon.className = 'moon';
        clearSkyContainer.appendChild(moon);
        
        // Create stars
        for (let i = 0; i < 50; i++) {
          const star = document.createElement('div');
          star.className = 'star';
          star.style.left = Math.random() * 100 + '%';
          star.style.top = Math.random() * 100 + '%';
          star.style.animationDelay = Math.random() * 2 + 's';
          clearSkyContainer.appendChild(star);
        }
      } else {
        // Create sun
        const sun = document.createElement('div');
        sun.className = 'sun';
        clearSkyContainer.appendChild(sun);
      }
      
      // Add clouds
      const cloud1 = document.createElement('div');
      cloud1.className = 'cloud cloud1';
      const cloud2 = document.createElement('div');
      cloud2.className = 'cloud cloud2';
      const cloud3 = document.createElement('div');
      cloud3.className = 'cloud cloud3';
      
      clearSkyContainer.appendChild(cloud1);
      clearSkyContainer.appendChild(cloud2);
      clearSkyContainer.appendChild(cloud3);
    }

    // Get weather icon based on condition and time
    function getWeatherIcon(main, timeOfDay) {
      const isNight = timeOfDay === 'night' || timeOfDay === 'evening';
      
      const icons = {
        'Clear': isNight ? '🌙' : '☀️',
        'Clouds': isNight ? '☁️' : '☁️',
        'Rain': '🌧️',
        'Drizzle': '🌦️',
        'Thunderstorm': '⛈️',
        'Snow': '❄️',
        'Mist': '🌫️',
        'Smoke': '🌫️',
        'Haze': '🌫️',
        'Dust': '🌫️',
        'Fog': '🌫️'
      };
      return icons[main] || '🌤️';
    }

    // Apply weather effects
    function applyWeatherEffects(weatherMain, timeOfDay) {
      // Remove all effects first
      document.body.className = '';
      clearSkyContainer.classList.remove('active');
      rainContainer.classList.remove('active');
      snowContainer.classList.remove('active');
      lightningContainer.classList.remove('active');

      // Clear existing effects
      rainContainer.innerHTML = '';
      snowContainer.innerHTML = '';

      // Update celestial body
      updateCelestialBody(timeOfDay);

      // Apply time of day class
      document.body.classList.add(timeOfDay);

      // Apply specific effects
      switch(weatherMain.toLowerCase()) {
        case 'clear':
          document.body.classList.add('clear-weather');
          clearSkyContainer.classList.add('active');
          break;

        case 'rain':
        case 'drizzle':
          document.body.classList.add('rain-weather');
          rainContainer.classList.add('active');
          createRain();
          break;

        case 'thunderstorm':
          document.body.classList.add('thunderstorm-weather');
          rainContainer.classList.add('active');
          lightningContainer.classList.add('active');
          createRain();
          createLightning();
          break;

        case 'snow':
          document.body.classList.add('snow-weather');
          snowContainer.classList.add('active');
          createSnow();
          break;

        case 'clouds':
          document.body.classList.add('clouds-weather');
          clearSkyContainer.classList.add('active');
          break;

        default:
          document.body.classList.add('clear-weather');
      }
    }

    // Create rain effect
    function createRain() {
      for (let i = 0; i < 100; i++) {
        const drop = document.createElement('div');
        drop.className = 'raindrop';
        drop.style.left = Math.random() * 100 + '%';
        drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
        drop.style.animationDelay = Math.random() * 2 + 's';
        rainContainer.appendChild(drop);
      }
    }

    // Create snow effect
    function createSnow() {
      for (let i = 0; i < 50; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = '❄';
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
        snowflake.style.animationDelay = Math.random() * 2 + 's';
        snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
        snowContainer.appendChild(snowflake);
      }
    }

    // Create lightning effect
    function createLightning() {
      const lightning = lightningContainer.querySelector('.lightning');
      setInterval(() => {
        if (Math.random() > 0.7) {
          lightning.style.animation = 'flash 1s';
          setTimeout(() => {
            lightning.style.animation = '';
          }, 1000);
        }
      }, 3000);
    }

    // Fetch weather data
    async function getWeather(city) {
      try {
        searchBtn.disabled = true;
        searchBtn.textContent = 'Loading...';

        const response = await fetch(`${API_URL}?q=${city}&appid=${API_KEY}&units=metric`);
        
        if (!response.ok) {
          throw new Error('City not found');
        }

        const data = await response.json();
        displayWeather(data);

      } catch (error) {
        showError();
      } finally {
        searchBtn.disabled = false;
        searchBtn.textContent = 'Get Weather';
      }
    }

    // Display weather data
    function displayWeather(data) {
      const timeOfDay = getTimeOfDay(data.timezone);
      
      // Update modal content
      document.getElementById('weather-icon').textContent = getWeatherIcon(data.weather[0].main, timeOfDay);
      document.getElementById('city-name').textContent = `${data.name}, ${data.sys.country}`;
      document.getElementById('weather-description').textContent = data.weather[0].description;
      document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}°C`;
      document.getElementById('feels-like').textContent = `${Math.round(data.main.feels_like)}°C`;
      document.getElementById('humidity').textContent = `${data.main.humidity}%`;
      document.getElementById('wind-speed').textContent = `${data.wind.speed} m/s`;
      document.getElementById('pressure').textContent = `${data.main.pressure} hPa`;

      // Apply weather effects
      applyWeatherEffects(data.weather[0].main, timeOfDay);

      // Show modal
      weatherModal.classList.add('show');
    }

    // Show error modal
    function showError() {
      errorModal.classList.add('show');
    }

    // Close modals
    function closeWeatherModal() {
      weatherModal.classList.remove('show');
    }

    function closeErrorModal() {
      errorModal.classList.remove('show');
    }

    // Close modal on background click
    weatherModal.addEventListener('click', (e) => {
      if (e.target === weatherModal) {
        closeWeatherModal();
      }
    });

    errorModal.addEventListener('click', (e) => {
      if (e.target === errorModal) {
        closeErrorModal();
      }
    });

    // Search button click
    searchBtn.addEventListener('click', () => {
      const city = searchInput.value.trim();
      if (city) {
        getWeather(city);
      } else {
        showError();
      }
    });

    // Enter key press
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        searchBtn.click();
      }
    });

    // Animate elements on scroll
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);

    document.querySelectorAll('.feature-card').forEach(card => {
      observer.observe(card);
    });
  </script>
</body>
</html>